#!/bin/sh
#
# Generate the ifcfg script for an interface and save it in the overlay

usage="ifcfg-gen <intf> <dhcp_config> [<ip_addr> [<netmask> [<gateway>] ] ]"
if test -z "$1"; then
   echo $usage
   exit 1
fi
if test -z "$2"; then
   echo $usage
   exit 1
fi

filename=/etc/ifcfg-$1
echo "# Generated by ifcfg-gen" > $filename
echo "dhcp_config=$2" >> $filename
if test -n "$3"; then
   echo "ip_addr=$3" >> $filename
fi
if test -n "$4"; then
   echo "netmask=$4" >> $filename
fi
if test -n "$5"; then
   echo "gateway=$5" >> $filename
fi

ovladd $filename
ovlsave
